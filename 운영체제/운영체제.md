#### 운영체제(Operating System)

- **컴퓨터를 동작시키는데 도움을 주는 소프트웨어**
- 컴퓨터 시스템의 자원들을 효율적으로 관리, 사용자가 컴퓨터를 편리하고 효과적으로 사용할 수 있도록 환경을 제공하는 여러 프로그램의 모임
- 컴퓨터 하드웨어 바로 윗단에 설치되는 소프트웨어 = 하드웨어 + 운영체제

<br>

1. 프로세스 & 스레드

   1. `프로세스`

      - 일반적으로 CPU에 의해 처리되는 사용자 프로그램, 시스템 프로그램 즉 **실행중인 `프로그램`**을 의미
        - 컴퓨터에서 연속적으로 실행되고 있는 프로그램
      - 운영체제로부터 시스템 자원(주소 공간, 파일, 메모리 등)을 할당받는 작업의 단위
      - 프로그램을 구동하여 프로그램 자체와 프로그램의 상태가 메모리 상에서 실행되는 작업 단위를 지칭
      - 프로그램의 명령어와 정적 데이터가 자원을 할당받고 메모리에 적재되면 프로세스가 됨
        - 프로그램
          - 일반적으로 하드 디스크 등에 저장되어 있는 `실행 코드`
          - 프로그램 자체는 생명력이 없다
          - 보조 기억장치에 존재하며 실행되기를 기다리는 명령어와 정적인 데이터의 묶음
      - 작업(Job), 태스크라고도 함

      <br>

      - 특징

        1. 프로세스는 각각 독립된 영역(Code, Data, Stack, Heap)을 할당 받는다

           ![image](https://user-images.githubusercontent.com/43842108/220046386-980c5747-61cf-4e27-92ba-7d4fbebb97e8.png)

           1. `Code(Text) 영역`
              - **`실행 명령`을 포함하는 코드들이 들어가는 부분**
              - 프로그램을 시작할 때 컴파일한 프로그램(기계어)이 저장, **읽기 전용 영역**이기때문에 프로세스가 함부로 변경할 수 없고 변경 시 오류
           2. `Data 영역`
              - **프로그램이 실행될 때 생성되고 프로그램이 종료되면 시스템에 반환**
              - **전역변수, 정적변수, 배열, 구조체** 등이 저장
              - Data 영역은 다시 Data(GVAR) 영역과 BSS 영역으로 나눌 수 있다
                - 초기화된 데이터 = Data(GVAR) 영역
                - 초기화되지 않은 데이터 = BSS 영역
           3. `Heap 영역`
              - **메모리를 `동적으로 할당`할 때 사용하는 메모리 영역**
           4. `Stack 영역`
              - **프로그램이 자동으로 사용하는 메모리 영역**
              - 함수 호출과 관계되는 **지역변수와 매개변수**가 저장, 함수 호출 시 생성되고 함수가 끝나면 반환

           <br>

   2. 스레드

      - 어떠한 프로그램 내에서, 특히 **프로세스 내에서 실행되는 흐름의 단위**

      <br>

      - 특징

        ![image](https://user-images.githubusercontent.com/43842108/220052921-bc4cc141-6286-4206-aeb8-716d56f10953.png)

        1. 프로세스 내에서 각각 Stack만 따로 할당받고 Code, Data, Heap 영역은 공유
        2. **한 프로세스 내에서 동작되는 여러 실행의 흐름**으로, 프로세스 내의 주소 공간이나 자원들(heap 공간 등)을 같은 프로세스 내에 스레드끼리 공유하면서 실행
        3. 같은 프로세스 안에 있는 여러 스레드들은 같은 Heap 공간을 공유
           - 반면에 프로세스는 다른 프로세스의 메모리에 직접 접근할 수 없다

<br>

2. 멀티 프로세스와 멀티 스레드

   1. `멀티 프로세스`

      - **하나의 응용 프로그램을 여러 개의 프로세스로 구성**하여 각 프로세스가 하나의 작업을 처리하도록 하는 것

      <br>

      - 장점

        1. 멀티 프로세싱은 여러 개의 자식 프로세스 중 하나에 문제가 발생해도 다른 프로세스들이 있기 때문에 영향이 확산되지 않음

        <br>

      - 단점

        1. Context Switching 과정엣 ㅓ캐시 메모리 초기화 등 무거운 작업이 진행되고 많은 시간이 소모되는 등 오버헤드 발생
        2. 프로세스는 각각 독립된 메모리 영역을 가지고 있기 때문에 프로세스 사이에서 공유하는 메모리는 없다
           1. 따라서, Context Switching이 발생하면 캐시에 있는 모든 데이터를 모두 리셋하고 다시 캐시 정보를 불러와야 한다
        3. 독립된 영역 때문에 프로세스 간의 통신이 필요

      <br>

   2. `멀티 스레드`

      - 하나의 프로그램을 여러 개의 스레드로 구성하는 방식

      ![image](https://user-images.githubusercontent.com/43842108/220055407-eb7ac76b-a087-43e2-9e2a-6a90910306b6.png)

      <br>

      - 장점

        1. Stack을 제외한 자원들을 공유하고 있기 때문에 Context Switching 시에 캐시 메모리를 비울 필요가 없고 이를 통해서 리소스를 아낄 수 있다
        2. Stack 이외의 메모리를 공유하고 있기 때문에 통신의 부담도 적다

        <br>

      - 단점

        1. 내부의 메모리를 공유하고 있어서 한 프로세스의 스레드가 문제가 생기면 해당 프로세스 안의 다른 스레드에도 문제가 생긴다
        2. 같은 데이터를 공유하기에 데이터 동기화에 신경을 써야한다

      <br>

   3. 멀티 프로세스 VS 멀티 스레드

      | 멀티 스레드                                                  | 멀티 프로세스                                                |
      | ------------------------------------------------------------ | ------------------------------------------------------------ |
      | - 멀티 프로세스보다 적은 메모리 공간 차지<br />- Context Switching이 빠르다는 장점<br />- 오류로 인해 하나의 스레드에 문제가 생기면 다른 스레드에도 문제가 생길 수 있다<br />- 동기화 문제 | - 하나의 프로세스가 문제가 생기더라도 다른 프로세스에 영향을 끼치지 않음<br />- 멀티 스레드보다 많은 메모리 공간과 CPU 시간 차지 |

      

<br>

3. 상태

   ![image](https://user-images.githubusercontent.com/43842108/220059499-8b606074-739c-456d-b2af-9ddda01dde3a.png)

   <br>

   1. 생성(new)
      - 프로세스가 처음 생성되었을 때
   2. 준비완료(ready)
      - 프로세서에게 할당되기를 기다리는 상태
   3. 실행(running)
      - 프로세서에 할당되어 실행된느 상태
      - CPU 차지
   4. 대기(waiting)
      - 작업이 완료되어 입출력을 기다리는 상태
   5. 종료(terminated)
      - 실행이 종료되어 프로세스 모드가 끝난 상태
